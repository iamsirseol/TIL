## 트랜잭션

> 트랜잭션이란 여러작업을 하나로 묶여 실행하는 유닛이다. 이 여러개의 작업 중 하나라도 실패한다면 이 트랜잭션은 실패이며 작업이 모두 성공해야 트랜잭션은 성공한 것이다.
<br> ✅ 따라서 트랜잭션에는 *성공* 또는 *실패* 만 존재한다.
<br> ✅ 데이터베이스 트랜잭션은 **ACID**라는 특성을 가지고 있다.

<br>


## ACID
> ACID는 데이터 베이스 내에서 일아나는 트랜잭션의 안전성을 보장하기 위함이다.
> * Atomicity
> * Consistency
> * Isolation
> * Durability

<br>

### Atomicity (원자성)
> 원자성은 트랜잭션의 여러작업이 **전부 성공하거나 전부 실패하는지** 결과를 확인할 수 있어야 한다.
```js
예를 들어 계좌이체를 할 경우 다음과 같이 두 단계가 모두 성공해야한다.
1. A 계좌에서 출금합니다.
2. B 계좌에 입금합니다.
```

<br>


### Consistency (일관성)
> 일관성은 데이터베이스의 상태가 일관되어야 한다는 것이다. 이 말은 트랜잭션 이후 다음 트랜잭션이 있을때 데이터베이스의 규칙이 같아야 한다는 뜻이다.
```js
예를 들어 '모든 고객은 이름을 반드시 가지고 있어야 한다'라는 규칙이 있는 경우
* 이름이 생략된 고객을 추가할 수 없다.
* 기존 고객의 이름데이터를 삭제할 수 없다.
```

<br>


### Isolation (격리성, 고립성)
> 격리성은 **모든 트랜잭션은 다른 트랜잭션으로부터 독립되어야 한다** 는 뜻이다. <br>
여러 개의 트랜잭션이 수행될 때, 각 트랜잭션은 격리되어 있으므로 연속으로 실행된 것과 동일한 결과가 나온다.
```js
예를 들어 A통장에서 B통장으로 5,000원 C통장으로 5,000원을 이체한다고 하면 A통장에서는 10,000원이 출금 되었지만 실질적으로는 B와 C에 5,000원이 2번 출금이 되어 각자 트랜잭션이 일어난 것이다.
```

<br>


### Durability(지속성)
> 지속성은 트랜잭션이 성공적으로 수행이 되었다면 그 트랜잭션에 대한 로그가 남아 있어야 한다. 만약 시스템 오류 등이 발생하더라도 **기록은 영구적으로 남는다**는 것이다.
```js
예를 들어 은행에서 계좌이체를 A통장에서 B통장으로 10,000원을 이체하였다면 은행 데이터베이스에 오류가 발생하여 종료가 되어도 이체내역은 기록이 남아야 한다.
```